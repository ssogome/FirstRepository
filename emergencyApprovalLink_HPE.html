<!Doctype html>
<html>
<head>
<script type='text/javascript' src="https://hpenterprise.sharepoint.com/teams/IS-TTR/JSscript%20Library/jquery-1.11.3.min.js"></script>
<script type="text/javascript">
	  var BmanagerEmail = "";
 $(function(){	
    
         SP.SOD.executeFunc('sp.js', 'SP.ClientContext',showLink());	
    	
}) 

function showLink(){
  
  var self = this;
  var  clientContext = SP.ClientContext.get_current();			        
					
					this.currentUser = clientContext.get_web().get_currentUser();
			  		clientContext.load(currentUser); 
					
					clientContext.executeQueryAsync(Function.createDelegate(self, self.showLinkSucceeded), Function.createDelegate(self, self.showLinkFailed)); 
}
 self.showLinkSucceeded = function(){
            
			  BmanagerEmail = currentUser.get_email();	
			  if((BmanagerEmail =='debra.s.chase@hpe.com')|| (BmanagerEmail =='suraizou.sogome@hpe.com') || (BmanagerEmail == 'bill.gosch@hpe.com')){$('#emergencyLink').show(); } 	
 }
 self.showLinkFailed = function(sender, args){
	   alert('Unable to show the link to approve amergency requests on behalf of team manager. ' + args.get_message() );
 }
	//HTML variable value
	openPage = function(){
	     var    siteCollectionObj =  _spPageContextInfo ;//SP.ClientContext.Current.Web.Site.WebApplication.Sites[0].Url; 
	 // site Absolute Url
	 var  siteURL = siteCollectionObj.webAbsoluteUrl; //SP.ClientContext.Current.Web.Site.Url;
	 //   page Absolute Url
	 var pageUrl  = siteCollectionObj.siteAbsoluteUrl;
	 
          alert(_spPageContextInfo.webServerRelativeUrl + '\n' +  siteCollectionObj + '\n' + siteURL  + '\n' + pageUrl);	
		location.href = pageUrl  + '/SitePages/Alternate%20Approval%20Page.aspx';   
	}
</script>	
</head>
<body>
<div id="emergencyLink" style="display:none">
  <a href="https://hpenterprise.sharepoint.com/teams/IS-TTR/SitePages/Alternate%20Approval%20Page.aspx"style="font-weigth:bold;font-size:x-large;color:green;"> All Team Managers List</a> <br />
  <a href = "javascript:openPage()" >Test</a>
</div>
</body>
</html>
